// clang-format off
// upload_speed 921600
// board esp32-s3-devkitc-1

#ifndef _TTGOTSUPREMES3_H
#define _TTGOTSUPREMES3_H

#include <stdint.h>

// T-Beam Supreme S3

// I2c adresses on SDA=17 / SCL=18
// 0x1c -> QMC6310 Magnetometer
// 0x3c -> OLED Display
// 0x77 -> BME280 Environmental Sensor

// Real time clock PCF8583 -> not yet supported by rtctime.cpp
//#define RTC_INT (14)

// 6-achsis unit MPU6886
// gyroscope & acceleration & temperature sensor QMI8658
// IMU_INT (33)
// IMU_CS (34)

#define HAS_SDCARD  1      // this board has an SD-card-reader/writer
// Pins for SD-card
#define SDCARD_CS    (47)
#define SDCARD_MOSI  (35)
#define SDCARD_MISO  (37)
#define SDCARD_SCLK  (36)
#define SPI_HOST SPI1_HOST

// display SSH1106 address 0x3c
#define HAS_DISPLAY 1
#define MY_DISPLAY_SDA (17)
#define MY_DISPLAY_SCL (18)
#define MY_DISPLAY_RST NOT_A_PIN
#define MY_DISPLAY_FLIP  1 // use if display is rotated

// button and led
#define HAS_BUTTON GPIO_NUM_0       // SW3 button is on GPIO0
#define HAS_LED NOT_A_PIN

// GPS settings
#define HAS_GPS 1 // use on board GPS
#define GPS_SERIAL 9600, SERIAL_8N1, GPIO_NUM_9, GPIO_NUM_8 // UBlox NEO 6M
#define GPS_INT GPIO_NUM_6 // 30ns accurary timepulse generated by NEO 6M Pin #3
#define GPS_WAKEUP GPIO_NUM_7 // currently unused in code

// LORA settings
#define HAS_LORA 1 // use on board LORA
#define CFG_sx1262_radio 1 // HPD16A
// Pins for LORA chip SPI interface, reset line and interrupt lines
#define LORA_RST  (5)
#define LORA_SCK  (12) 
#define LORA_CS   (10)
#define LORA_MISO (13)
#define LORA_MOSI (11)
#define LORA_IRQ  (1)
#define LORA_IO1  LMIC_UNUSED_PIN
#define LORA_IO2  LMIC_UNUSED_PIN
#define LORA_BUSY (4)

// BME280 sensor on I2C bus
#define HAS_BME 1 // Enable BME sensor
#define HAS_BME280 SDA, SCL
#define BME280_ADDR 0x77

// power management settings
#define HAS_PMU 1 // has AXP2101 chip at i2c 0x68/0x69
#define XPOWERS_CHIP_AXP2101 1
#define PMU_SDA GPIO_NUM_42 // Used for PMU management and PCF8563, ESP32 pin#48 / MTMS -> GPIO42
#define PMU_SCL GPIO_NUM_41 // Used for PMU management and PCF8563, ESP32 pin#47 / MTDI -> GPIO41
#define PMU_INT GPIO_NUM_40 // battery interrupt, ESP32 pin#45 / MTDO -> GPIP40
#define PMU_CHG_CURRENT XPOWERS_AXP202_CHG_CUR_1000MA // battery charge current
// See: xpowers_AXP202_chg_curr_t
// possible values (mA):
// 0/100/125/150/175/200/300/400/500/600/700/800/900/1000
#define PMU_CHG_CUTOFF XPOWERS_AXP202_CHG_VOL_4V2 // battery charge cutoff
// See: xpowers_AXP202_chg_vol_t
// possible values (V):
// 4V1/4V1/4V2/4V35/4V4

// power lines T-Beam Supreme
// A_LDO1: QMC6310 Magnetometer + BME280
// A_LDO2: unused
// A_LDO3: LORA
// A_LDO4: GPS
// B_LDO1: SD-Card
// B_LOD2: unused


#endif