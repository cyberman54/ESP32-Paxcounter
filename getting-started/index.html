
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="ESP32-Paxcounter Documentation">
      
      
      
      
        <link rel="prev" href="../hardware/">
      
      
        <link rel="next" href="../display-led/">
      
      
      <link rel="icon" href="../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.4">
    
    
      
        <title>Getting Started - Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.8608ea7d.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#preparing" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Documentation" class="md-header__button md-logo" aria-label="Documentation" data-md-component="logo">
      
  <img src="../assets/paxcounter_logo_white.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Getting Started
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/cyberman54/ESP32-Paxcounter" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Documentation" class="md-nav__button md-logo" aria-label="Documentation" data-md-component="logo">
      
  <img src="../assets/paxcounter_logo_white.svg" alt="logo">

    </a>
    Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/cyberman54/ESP32-Paxcounter" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Intro
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../hardware/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hardware
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#install-platformio" class="md-nav__link">
    <span class="md-ellipsis">
      Install Platformio
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#platformioini" class="md-nav__link">
    <span class="md-ellipsis">
      platformio.ini
    </span>
  </a>
  
    <nav class="md-nav" aria-label="platformio.ini">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#selecting-a-board" class="md-nav__link">
    <span class="md-ellipsis">
      Selecting a board
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#paxcounterconf" class="md-nav__link">
    <span class="md-ellipsis">
      paxcounter.conf
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sharedlmic_configh" class="md-nav__link">
    <span class="md-ellipsis">
      shared/lmic_config.h
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sharedloraconfh" class="md-nav__link">
    <span class="md-ellipsis">
      shared/loraconf.h
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sharedotaconf" class="md-nav__link">
    <span class="md-ellipsis">
      shared/ota.conf
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../display-led/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Display & LED
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../legalnote/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Legal note
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../configuration/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Configuration
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6" id="__nav_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Configuration
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../configuration/custom-sensors/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Custom Sensors
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../integrations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Integrations
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../payloadformat/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Payload Format
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../remotecontrol/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Remote control
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../license-credits/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Licence & Credits
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../releases/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Releases
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#install-platformio" class="md-nav__link">
    <span class="md-ellipsis">
      Install Platformio
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#platformioini" class="md-nav__link">
    <span class="md-ellipsis">
      platformio.ini
    </span>
  </a>
  
    <nav class="md-nav" aria-label="platformio.ini">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#selecting-a-board" class="md-nav__link">
    <span class="md-ellipsis">
      Selecting a board
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#paxcounterconf" class="md-nav__link">
    <span class="md-ellipsis">
      paxcounter.conf
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sharedlmic_configh" class="md-nav__link">
    <span class="md-ellipsis">
      shared/lmic_config.h
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sharedloraconfh" class="md-nav__link">
    <span class="md-ellipsis">
      shared/loraconf.h
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sharedotaconf" class="md-nav__link">
    <span class="md-ellipsis">
      shared/ota.conf
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="preparing">Preparing</h1>
<h2 id="install-platformio">Install Platformio</h2>
<p>Install <A HREF="https://platformio.org/">PlatformIO IDE for embedded development</A> to build this project. Platformio integrates with your favorite IDE, choose e.g. <a href="https://marketplace.visualstudio.com/items?itemName=platformio.platformio-ide">Visual Studio Code</a>, Atom, Eclipse etc.</p>
<p>Compile time configuration is spread across several files. Before compiling the code, edit or create the following files:</p>
<h2 id="platformioini">platformio.ini</h2>
<p>Edit <code>platformio_orig.ini</code> (for ESP32 CPU based boards) <em>or</em> <code>platformio_orig_s3.ini</code> (for ESP32-S3 CPU based boards) and select desired board in section <strong>board</strong>. To add a new board, create an appropriate hardware abstraction layer file in hal subdirectory, and add a pointer to this file in section <strong>board</strong>. Copy or rename to <code>platformio.ini</code> in the root directory of the project. Now start Platformio.</p>
<h3 id="selecting-a-board">Selecting a board</h3>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Uncomment your board</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-0-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-0-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-0-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-0-10">10</a></span>
<span class="normal"><a href="#__codelineno-0-11">11</a></span>
<span class="normal"><a href="#__codelineno-0-12">12</a></span>
<span class="normal"><a href="#__codelineno-0-13">13</a></span>
<span class="normal"><a href="#__codelineno-0-14">14</a></span>
<span class="normal"><a href="#__codelineno-0-15">15</a></span>
<span class="normal"><a href="#__codelineno-0-16">16</a></span>
<span class="normal"><a href="#__codelineno-0-17">17</a></span>
<span class="normal"><a href="#__codelineno-0-18">18</a></span>
<span class="normal"><a href="#__codelineno-0-19">19</a></span>
<span class="normal"><a href="#__codelineno-0-20">20</a></span>
<span class="normal"><a href="#__codelineno-0-21">21</a></span>
<span class="normal"><a href="#__codelineno-0-22">22</a></span>
<span class="normal"><a href="#__codelineno-0-23">23</a></span>
<span class="normal"><a href="#__codelineno-0-24">24</a></span>
<span class="normal"><a href="#__codelineno-0-25">25</a></span>
<span class="normal"><a href="#__codelineno-0-26">26</a></span>
<span class="normal"><a href="#__codelineno-0-27">27</a></span>
<span class="normal"><a href="#__codelineno-0-28">28</a></span>
<span class="normal"><a href="#__codelineno-0-29">29</a></span>
<span class="normal"><a href="#__codelineno-0-30">30</a></span>
<span class="normal"><a href="#__codelineno-0-31">31</a></span>
<span class="normal"><a href="#__codelineno-0-32">32</a></span>
<span class="normal"><a href="#__codelineno-0-33">33</a></span>
<span class="normal"><a href="#__codelineno-0-34">34</a></span>
<span class="normal"><a href="#__codelineno-0-35">35</a></span>
<span class="normal"><a href="#__codelineno-0-36">36</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-6" name="__codelineno-0-6"></a><span class="c1">;</span>
<a id="__codelineno-0-7" name="__codelineno-0-7"></a><span class="k">[board]</span>
<a id="__codelineno-0-8" name="__codelineno-0-8"></a><span class="c1">;halfile = generic.h</span>
<a id="__codelineno-0-9" name="__codelineno-0-9"></a><span class="c1">;halfile = ebox.h</span>
<a id="__codelineno-0-10" name="__codelineno-0-10"></a><span class="c1">;halfile = eboxtube.h</span>
<a id="__codelineno-0-11" name="__codelineno-0-11"></a><span class="c1">;halfile = ecopower.h</span>
<a id="__codelineno-0-12" name="__codelineno-0-12"></a><span class="c1">;halfile = heltec.h</span>
<a id="__codelineno-0-13" name="__codelineno-0-13"></a><span class="c1">;halfile = heltecv2.h</span>
<a id="__codelineno-0-14" name="__codelineno-0-14"></a><span class="c1">;halfile = heltecv21.h</span>
<a id="__codelineno-0-15" name="__codelineno-0-15"></a><span class="c1">;halfile = ttgov1.h</span>
<a id="__codelineno-0-16" name="__codelineno-0-16"></a><span class="c1">;halfile = ttgov2.h</span>
<a id="__codelineno-0-17" name="__codelineno-0-17"></a><span class="c1">;halfile = ttgov21old.h</span>
<a id="__codelineno-0-18" name="__codelineno-0-18"></a><span class="na">halfile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">ttgov21new.h</span>
<a id="__codelineno-0-19" name="__codelineno-0-19"></a><span class="c1">;halfile = ttgofox.h</span>
<a id="__codelineno-0-20" name="__codelineno-0-20"></a><span class="c1">;halfile = ttgobeam.h</span>
<a id="__codelineno-0-21" name="__codelineno-0-21"></a><span class="c1">;halfile = ttgobeam10.h</span>
<a id="__codelineno-0-22" name="__codelineno-0-22"></a><span class="c1">;halfile = ttgobeam12.h</span>
<a id="__codelineno-0-23" name="__codelineno-0-23"></a><span class="c1">;halfile = ttgotdisplay.h</span>
<a id="__codelineno-0-24" name="__codelineno-0-24"></a><span class="c1">;halfile = ttgotwristband.h</span>
<a id="__codelineno-0-25" name="__codelineno-0-25"></a><span class="c1">;halfile = fipy.h</span>
<a id="__codelineno-0-26" name="__codelineno-0-26"></a><span class="c1">;halfile = lopy.h</span>
<a id="__codelineno-0-27" name="__codelineno-0-27"></a><span class="c1">;halfile = lopy4.h</span>
<a id="__codelineno-0-28" name="__codelineno-0-28"></a><span class="c1">;halfile = lolin32litelora.h</span>
<a id="__codelineno-0-29" name="__codelineno-0-29"></a><span class="c1">;halfile = lolin32lora.h</span>
<a id="__codelineno-0-30" name="__codelineno-0-30"></a><span class="c1">;halfile = lolin32lite.h</span>
<a id="__codelineno-0-31" name="__codelineno-0-31"></a><span class="c1">;halfile = wemos32oled.h</span>
<a id="__codelineno-0-32" name="__codelineno-0-32"></a><span class="c1">;halfile = wemos32matrix.h</span>
<a id="__codelineno-0-33" name="__codelineno-0-33"></a><span class="c1">;halfile = octopus32.h</span>
<a id="__codelineno-0-34" name="__codelineno-0-34"></a><span class="c1">;halfile = tinypico.h</span>
<a id="__codelineno-0-35" name="__codelineno-0-35"></a><span class="c1">;halfile = tinypicomatrix.h</span>
<a id="__codelineno-0-36" name="__codelineno-0-36"></a><span class="c1">;halfile = m5core.h</span>
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Copy</label><label for="__tabbed_1_2">Rename</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>cp<span class="w"> </span>platformio_orig.ini<span class="w"> </span>platformio.ini
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>mv<span class="w"> </span>platformio_orig.ini<span class="w"> </span>platformio.ini
</code></pre></div>
</div>
</div>
</div>
<details class="info">
<summary>platformio_orig_s3.ini</summary>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">Copy</label><label for="__tabbed_2_2">Rename</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>cp<span class="w"> </span>platformio_orig_s3.ini<span class="w"> </span>platformio.ini
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>mv<span class="w"> </span>platformio_orig_s3.ini<span class="w"> </span>platformio.ini
</code></pre></div>
</div>
</div>
</div>
</details>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Platformio is looking for <code>platformio.ini</code> in the root directory and won't start if it does not find this file!</p>
</div>
<h2 id="paxcounterconf">paxcounter.conf</h2>
<p>Edit <code>shared/paxcounter_orig.conf</code> and tailor settings in this file according to your needs and use case. Please take care of the duty cycle regulations of the LoRaWAN network you're going to use. Copy or rename to <code>shared/paxcounter.conf</code>.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="3:2"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">Copy</label><label for="__tabbed_3_2">Rename</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>cp<span class="w"> </span>shared/paxcounter_orig.conf<span class="w"> </span>shared/paxcounter.conf
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>mv<span class="w"> </span>shared/paxcounter_orig.conf<span class="w"> </span>shared/paxcounter.conf
</code></pre></div>
</div>
</div>
</div>
<p>If your device has a <strong>real time clock</strong> it can be updated by either LoRaWAN network or GPS time, according to settings <em>TIME_SYNC_INTERVAL</em> and <em>TIME_SYNC_LORAWAN</em> in <code>paxcounter.conf</code>.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">paxcounter.conf</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-7-85">85</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-7-85" name="__codelineno-7-85"></a><span class="cp">#define RESPONSE_TIMEOUT_MS             60000   </span><span class="c1">// firmware binary server connection timeout [milliseconds]</span>
</code></pre></div></td></tr></table></div>
<h2 id="sharedlmic_configh">shared/lmic_config.h</h2>
<p>Edit <code>shared/lmic_config.h</code> and tailor settings in this file according to your country and device hardware. Please take care of national regulations when selecting the frequency band for LoRaWAN.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">national regulations in shared/lmic_config.h</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-8-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-8-10">10</a></span>
<span class="normal"><a href="#__codelineno-8-11">11</a></span>
<span class="normal"><a href="#__codelineno-8-12">12</a></span>
<span class="normal"><a href="#__codelineno-8-13">13</a></span>
<span class="normal"><a href="#__codelineno-8-14">14</a></span>
<span class="normal"><a href="#__codelineno-8-15">15</a></span>
<span class="normal"><a href="#__codelineno-8-16">16</a></span>
<span class="normal"><a href="#__codelineno-8-17">17</a></span>
<span class="normal"><a href="#__codelineno-8-18">18</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-8-9" name="__codelineno-8-9"></a><span class="c1">//#define CFG_au915 1 // Australia</span>
<a id="__codelineno-8-10" name="__codelineno-8-10"></a><span class="c1">//#define CFG_as923 1 // Asia</span>
<a id="__codelineno-8-11" name="__codelineno-8-11"></a><span class="c1">//#define CFG_kr920 1 // Korea</span>
<a id="__codelineno-8-12" name="__codelineno-8-12"></a>
<a id="__codelineno-8-13" name="__codelineno-8-13"></a><span class="c1">// LMIC LORAWAN STACK SETTINGS</span>
<a id="__codelineno-8-14" name="__codelineno-8-14"></a><span class="c1">// --&gt; adapt to your device only if necessary</span>
<a id="__codelineno-8-15" name="__codelineno-8-15"></a>
<a id="__codelineno-8-16" name="__codelineno-8-16"></a><span class="c1">// use interrupts only if LORA_IRQ and LORA_DIO are connected to interrupt</span>
<a id="__codelineno-8-17" name="__codelineno-8-17"></a><span class="c1">// capable and separate GPIO pins on your board, if not don&#39;t enable</span>
<a id="__codelineno-8-18" name="__codelineno-8-18"></a><span class="c1">// note: this feature can&#39;t be used on ESP32 unless PR #556 of MCCI LMIC was merged</span>
</code></pre></div></td></tr></table></div>
<h2 id="sharedloraconfh">shared/loraconf.h</h2>
<p>Create file <code>shared/loraconf.h</code> using the template <a href="https://github.com/cyberman54/ESP32-Paxcounter/blob/master/shared/loraconf_sample.h">shared/loraconf_sample.h</a> and adjust settings to use your personal values. To join the network and activate your paxcounter, you must configure either OTAA or ABP join method. You should use OTAA, whenever possible. To understand the differences of the two methods, <a href="https://www.thethingsnetwork.org/docs/devices/registration.html">this article</a> may be useful.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="4:2"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><input id="__tabbed_4_2" name="__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="__tabbed_4_1">Copy</label><label for="__tabbed_4_2">Rename</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>cp<span class="w"> </span>shared/loraconf_sample.h<span class="w"> </span>shared/loraconf.h
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>mv<span class="w"> </span>shared/loraconf_sample.h<span class="w"> </span>shared/loraconf.h
</code></pre></div>
</div>
</div>
</div>
<p>To configure OTAA, leave <code>#define LORA_ABP</code> deactivated (commented). To use ABP, activate (uncomment) <code>#define LORA_ABP</code> in the file <code>shared/loraconf.h</code>.
The file <code>shared/loraconf_sample.h</code> contains more information about the values to provide.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="5:2"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><input id="__tabbed_5_2" name="__tabbed_5" type="radio" /><div class="tabbed-labels"><label for="__tabbed_5_1">Activate OTAA (Default), Deactivate ABP</label><label for="__tabbed_5_2">Deactivate OTAA, Activate ABP</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">shared/loraconf.h</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-11-18">18</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-11-18" name="__codelineno-11-18"></a><span class="c1">//#define LORA_ABP</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">shared/loraconf.h</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-12-18">18</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-12-18" name="__codelineno-12-18"></a><span class="cp">#define LORA_ABP</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<h2 id="sharedotaconf">shared/ota.conf</h2>
<p>Create file <code>shared/ota.conf</code> using the template <a href="https://github.com/cyberman54/ESP32-Paxcounter/blob/master/shared/ota_sample.conf">shared/ota_sample.conf</a> and enter your WIFI network &amp; key. These settings are used for downloading updates via WiFi, either from a remote https server, or locally via WebUI. If you want to use a remote server, you need a <A HREF="https://github.com/paxexpress/docs">PAX.express repository</A>. Enter your PAX.express credentials in ota.conf. If you don't need wireless firmware updates just rename ota.sample.conf to ota.conf.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="6:2"><input checked="checked" id="__tabbed_6_1" name="__tabbed_6" type="radio" /><input id="__tabbed_6_2" name="__tabbed_6" type="radio" /><div class="tabbed-labels"><label for="__tabbed_6_1">Copy</label><label for="__tabbed_6_2">Rename</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>cp<span class="w"> </span>shared/ota_sample.conf<span class="w"> </span>shared/ota.conf
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>mv<span class="w"> </span>shared/ota_sample.conf<span class="w"> </span>shared/ota.conf
</code></pre></div>
</div>
</div>
</div>
<h1 id="building">Building</h1>
<p>Use <A HREF="https://platformio.org/">PlatformIO</A> with your preferred IDE for development and building this code. Make sure you have latest PlatformIO version.</p>
<h1 id="uploading">Uploading</h1>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<ol>
<li>After editing <code>paxcounter.conf</code>, use "clean" button before "build" in PlatformIO!</li>
<li>Clear NVRAM of the board to delete previous stored runtime settings (<code>pio run -t erase</code>)</li>
</ol>
</div>
<ul>
<li>
<p><strong>by cable, via USB/UART interface:</strong>
To upload the code via cable to your ESP32 board this needs to be switched from run to bootloader mode. Boards with USB bridge like Heltec and TTGO usually have an onboard logic which allows soft switching by the upload tool. In PlatformIO this happenes automatically.<p>
The LoPy/LoPy4/FiPy board needs to be set manually. See these
<A HREF="https://www.thethingsnetwork.org/labs/story/program-your-lopy-from-the-arduino-ide-using-lmic">instructions</A> how to do it. Don't forget to press on board reset button after switching between run and bootloader mode.<p>
The original Pycom firmware is not needed, so there is no need to update it before flashing Paxcounter. Just flash the compiled paxcounter binary (.elf file) on your LoPy/LoPy4/FiPy. If you later want to go back to the Pycom firmware, download the firmware from Pycom and flash it over.</p>
</li>
<li>
<p><strong>over the air (OTA), download via WiFi:</strong>
After the ESP32 board is initially flashed and has joined a LoRaWAN network, the firmware can update itself by OTA. This process is kicked off by sending a remote control command (see below) via LoRaWAN to the board. The board then tries to connect via WiFi to a cloud service (<A HREF="https://github.com/paxexpress">PAX.express</A>), checks for update, and if available downloads the binary and reboots with it. If something goes wrong during this process, the board reboots back to the current version. Prerequisites for OTA are: 1. You own a PAX.express repository, 2. you pushed the update binary to your PAX.express repository, 3. internet access via encrypted (WPA2) WiFi is present at the board's site, 4. WiFi credentials were set in ota.conf and initially flashed to the board. Step 2 runs automated, just enter the credentials in ota.conf and set <code>upload_protocol = custom</code> in platformio.ini. Then press build and lean back watching platformio doing build and upload.</p>
</li>
<li>
<p><strong>over the air (OTA), upload via WiFi:</strong>
If option <em>BOOTMENU</em> is defined in <code>paxcounter.conf</code>, the ESP32 board will try to connect to a known WiFi access point each time cold starting (after a power cycle or a reset), using the WiFi credentials given in <code>ota.conf</code>. Once connected to the WiFi it will fire up a simple webserver, providing a bootstrap menu waiting for a user interaction (pressing "START" button in menu). This process will time out after <em>BOOTDELAY</em> seconds, ensuring booting the device to runmode. Once a user interaction in bootstrap menu was detected, the timeout will be extended to <em>BOOTTIMEOUT</em> seconds. During this time a firmware upload can be performed manually by user, e.g. using a smartphone in tethering mode providing the firmware upload file.</p>
</li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "navigation.tracking", "navigation.indexes", "content.code.annotate"], "search": "../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.f1b6f286.min.js"></script>
      
    
  </body>
</html>